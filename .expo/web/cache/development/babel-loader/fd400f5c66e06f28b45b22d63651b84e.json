{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _jsxFileName = \"C:\\\\sites\\\\fo-github\\\\App.js\",\n    _this = this;\n\nimport * as React from \"react\";\nimport { useState, useContext } from \"react\";\nimport { NavigationContainer } from \"@react-navigation/native\";\nimport { createStackNavigator } from \"@react-navigation/stack\";\nimport ErrorScreen from \"./app/error/error\";\nimport SettingScreen from \"./app/layout/settings\";\nimport PageScreen from \"./app/layout/page\";\nimport AppContext from \"./app/utilities/context\";\nimport constants from \"./app/utilities/constants.json\";\nimport styles from \"./app/content/css/styles\";\nimport { navigationRef } from \"./app/utilities/navigator\";\nimport { Load } from \"./app/utilities/storage\";\nvar Stack = createStackNavigator();\n\nfunction App() {\n  var _useState = useState(constants.downloadTitle),\n      _useState2 = _slicedToArray(_useState, 2),\n      download_title = _useState2[0],\n      set_download_title = _useState2[1];\n\n  var _useState3 = useState(constants.downloadMedia),\n      _useState4 = _slicedToArray(_useState3, 2),\n      download_media = _useState4[0],\n      set_download_media = _useState4[1];\n\n  var _useState5 = useState(0.00),\n      _useState6 = _slicedToArray(_useState5, 2),\n      download_progress = _useState6[0],\n      set_download_progress = _useState6[1];\n\n  var _useState7 = useState(constants.downloadStatus.notStarted),\n      _useState8 = _slicedToArray(_useState7, 2),\n      download_status = _useState8[0],\n      set_download_status = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      audio_playing_title = _useState10[0],\n      set_audio_playing_title = _useState10[1];\n\n  var _useState11 = useState(\"\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      audio_playing_media = _useState12[0],\n      set_audio_playing_media = _useState12[1];\n\n  var _useState13 = useState(constants.audioStatus.unloaded),\n      _useState14 = _slicedToArray(_useState13, 2),\n      audio_playing_status = _useState14[0],\n      set_audio_playing_status = _useState14[1];\n\n  var _useState15 = useState(null),\n      _useState16 = _slicedToArray(_useState15, 2),\n      audio_player_instance = _useState16[0],\n      set_audio_player_instance = _useState16[1];\n\n  var _useState17 = useState(constants.settings.fontSize),\n      _useState18 = _slicedToArray(_useState17, 2),\n      setting_font_size = _useState18[0],\n      set_font_size = _useState18[1];\n\n  var _useState19 = useState(constants.settings.themeIndex),\n      _useState20 = _slicedToArray(_useState19, 2),\n      setting_theme = _useState20[0],\n      set_theme = _useState20[1];\n\n  var _useState21 = useState(styles.pageBodyLight),\n      _useState22 = _slicedToArray(_useState21, 2),\n      setting_theme_page_background_color = _useState22[0],\n      set_theme_page_background_color = _useState22[1];\n\n  var _useState23 = useState(styles.pageFontLight),\n      _useState24 = _slicedToArray(_useState23, 2),\n      setting_theme_page_font_color = _useState24[0],\n      set_theme_page_font_color = _useState24[1];\n\n  var _useState25 = useState(styles.headerBgLight),\n      _useState26 = _slicedToArray(_useState25, 2),\n      setting_theme_header_background_color = _useState26[0],\n      set_theme_header_background_color = _useState26[1];\n\n  var _useState27 = useState(styles.tabBgLight),\n      _useState28 = _slicedToArray(_useState27, 2),\n      setting_theme_tab_background_color = _useState28[0],\n      set_theme_tab_background_color = _useState28[1];\n\n  var appState = {\n    downloadTitle: download_title,\n    downloadMedia: download_media,\n    downloadProgress: download_progress,\n    downloadStatus: download_status,\n    audio_playing_title: audio_playing_title,\n    audioPlayingMedia: audio_playing_media,\n    audioPlayingStatus: audio_playing_status,\n    audioPlayerInstance: audio_player_instance,\n    set_download_title: set_download_title,\n    set_download_progress: set_download_progress,\n    set_download_status: set_download_status,\n    set_download_media: set_download_media,\n    set_audio_playing_title: set_audio_playing_title,\n    set_audio_playing_media: set_audio_playing_media,\n    set_audio_playing_status: set_audio_playing_status,\n    set_audio_player_instance: set_audio_player_instance,\n    settingFontSize: setting_font_size,\n    settingTheme: setting_theme,\n    settingThemePageBackgroundColor: setting_theme_page_background_color,\n    settingThemePageFontColor: setting_theme_page_font_color,\n    settingThemeHeaderBackgroundColor: setting_theme_header_background_color,\n    settingThemeTabBackgroundColor: setting_theme_tab_background_color,\n    set_font_size: set_font_size,\n    set_theme: set_theme,\n    set_theme_page_background_color: set_theme_page_background_color,\n    set_theme_page_font_color: set_theme_page_font_color,\n    set_theme_header_background_color: set_theme_header_background_color,\n    set_theme_tab_background_color: set_theme_tab_background_color\n  };\n  return React.createElement(AppContext.Provider, {\n    value: appState,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }\n  }, React.createElement(NavigationContainer, {\n    ref: navigationRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }, React.createElement(StackNavigator, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  })));\n}\n\nvar StackNavigator = function StackNavigator() {\n  var appStateContext = useContext(AppContext);\n\n  var SetSlider = function SetSlider(fontSize) {\n    if (!fontSize) {\n      fontSize = constants.settings.fontSize;\n    } else {\n      if (fontSize.toString() === appStateContext.settingFontSize.toString()) return;\n    }\n\n    fontSize = Number(fontSize);\n    appStateContext.set_font_size(fontSize);\n  };\n\n  var SetTheme = function SetTheme(themeIndex) {\n    if (!themeIndex) {\n      themeIndex = constants.settings.themeIndex;\n    } else {\n      if (themeIndex.toString() === appStateContext.settingTheme.toString()) return;\n    }\n\n    themeIndex = Number(themeIndex);\n    UpdateTheme(themeIndex);\n  };\n\n  var UpdateTheme = function UpdateTheme(index) {\n    var themeIndex = 0;\n    var pageBg = styles.pageBodyLight,\n        pageFont = styles.pageFontLight,\n        headerBg = styles.headerBgLight,\n        tabBg = styles.tabBgLight;\n\n    if (index) {\n      switch (index) {\n        case 1:\n          themeIndex = index;\n          pageBg = styles.pageBodyDark;\n          pageFont = styles.pageFontDark;\n          headerBg = styles.headerBgDark;\n          tabBg = styles.tabBgDark;\n          break;\n\n        case 2:\n          themeIndex = index;\n          pageBg = styles.pageBodyBook;\n          pageFont = styles.pageFontBook;\n          headerBg = styles.headerBgBook;\n          tabBg = styles.tabBgBook;\n          break;\n      }\n    }\n\n    appStateContext.set_theme(themeIndex);\n    appStateContext.set_theme_page_background_color(pageBg);\n    appStateContext.set_theme_page_font_color(pageFont);\n    appStateContext.set_theme_header_background_color(headerBg);\n    appStateContext.set_theme_tab_background_color(tabBg);\n  };\n\n  Load(constants.settings.fontSizeName).then(function (result) {\n    return SetSlider(result);\n  }).catch(function (error) {\n    console.log(\"error caught font size\");\n    SetSlider(constants.settings.fontSize);\n  });\n  Load(constants.settings.themeIndexName).then(function (result) {\n    return SetTheme(result);\n  }).catch(function (error) {\n    console.log(\"error caught theme\");\n    SetTheme(constants.settings.themeIndex);\n  });\n  return React.createElement(Stack.Navigator, {\n    initialRouteName: \"Page\",\n    screenOptions: {\n      headerStyle: appStateContext.settingThemeHeaderBackgroundColor,\n      headerTintColor: \"#ffffff\",\n      headerTitleStyle: {\n        fontWeight: \"bold\"\n      },\n      cardStyle: appStateContext.settingThemePageBackgroundColor\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 5\n    }\n  }, React.createElement(Stack.Screen, {\n    name: \"Page\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }\n  }, function (props) {\n    return React.createElement(PageScreen, _extends({}, props, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 21\n      }\n    }));\n  }), React.createElement(Stack.Screen, {\n    name: \"Error\",\n    component: ErrorScreen,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }\n  }), React.createElement(Stack.Screen, {\n    name: \"Settings\",\n    component: SettingScreen,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default App;","map":{"version":3,"sources":["C:/sites/fo-github/App.js"],"names":["React","useState","useContext","NavigationContainer","createStackNavigator","ErrorScreen","SettingScreen","PageScreen","AppContext","constants","styles","navigationRef","Load","Stack","App","downloadTitle","download_title","set_download_title","downloadMedia","download_media","set_download_media","download_progress","set_download_progress","downloadStatus","notStarted","download_status","set_download_status","audio_playing_title","set_audio_playing_title","audio_playing_media","set_audio_playing_media","audioStatus","unloaded","audio_playing_status","set_audio_playing_status","audio_player_instance","set_audio_player_instance","settings","fontSize","setting_font_size","set_font_size","themeIndex","setting_theme","set_theme","pageBodyLight","setting_theme_page_background_color","set_theme_page_background_color","pageFontLight","setting_theme_page_font_color","set_theme_page_font_color","headerBgLight","setting_theme_header_background_color","set_theme_header_background_color","tabBgLight","setting_theme_tab_background_color","set_theme_tab_background_color","appState","downloadProgress","audioPlayingMedia","audioPlayingStatus","audioPlayerInstance","settingFontSize","settingTheme","settingThemePageBackgroundColor","settingThemePageFontColor","settingThemeHeaderBackgroundColor","settingThemeTabBackgroundColor","StackNavigator","appStateContext","SetSlider","toString","Number","SetTheme","UpdateTheme","index","pageBg","pageFont","headerBg","tabBg","pageBodyDark","pageFontDark","headerBgDark","tabBgDark","pageBodyBook","pageFontBook","headerBgBook","tabBgBook","fontSizeName","then","result","catch","error","console","log","themeIndexName","headerStyle","headerTintColor","headerTitleStyle","fontWeight","cardStyle","props"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport { useState, useContext } from \"react\";\nimport { NavigationContainer } from \"@react-navigation/native\";\nimport { createStackNavigator } from \"@react-navigation/stack\";\nimport ErrorScreen from \"./app/error/error\";\nimport SettingScreen from \"./app/layout/settings\";\nimport PageScreen from \"./app/layout/page\";\nimport AppContext from \"./app/utilities/context\";\nimport constants from \"./app/utilities/constants.json\";\nimport styles from \"./app/content/css/styles\";\nimport { navigationRef } from './app/utilities/navigator';\nimport { Load } from \"./app/utilities/storage\";\n\nconst Stack = createStackNavigator();\n\nfunction App() {\n  // Define as many global variables as your app needs, and hooks to set the state of the variable.\n  // For each global variable, define a function for updating it. In the case of download_progress, weâ€™ll just use set_download_progress.\n  // useState usage: const [var, set action] = useState(\"initialValue\")  \n  const [download_title, set_download_title] = useState(constants.downloadTitle);\n  const [download_media, set_download_media] = useState(constants.downloadMedia);\n  const [download_progress, set_download_progress] = useState(0.00);\n  const [download_status, set_download_status] = useState(constants.downloadStatus.notStarted);\n  const [audio_playing_title, set_audio_playing_title] = useState(\"\");\n  const [audio_playing_media, set_audio_playing_media] = useState(\"\");\n  const [audio_playing_status, set_audio_playing_status] = useState(constants.audioStatus.unloaded);\n  const [audio_player_instance, set_audio_player_instance] = useState(null);\n  //app settings\n  const [setting_font_size, set_font_size] = useState(constants.settings.fontSize);\n  const [setting_theme, set_theme] = useState(constants.settings.themeIndex);\n  const [setting_theme_page_background_color, set_theme_page_background_color] = useState(styles.pageBodyLight);\n  const [setting_theme_page_font_color, set_theme_page_font_color] = useState(styles.pageFontLight);\n  const [setting_theme_header_background_color, set_theme_header_background_color] = useState(styles.headerBgLight);\n  const [setting_theme_tab_background_color, set_theme_tab_background_color] = useState(styles.tabBgLight);\n  const appState = {\n    downloadTitle: download_title,\n    downloadMedia: download_media,\n    downloadProgress: download_progress,\n    downloadStatus: download_status,\n    audio_playing_title: audio_playing_title,\n    audioPlayingMedia: audio_playing_media,\n    audioPlayingStatus: audio_playing_status,\n    audioPlayerInstance: audio_player_instance,\n    set_download_title,\n    set_download_progress,\n    set_download_status,\n    set_download_media,\n    set_audio_playing_title,\n    set_audio_playing_media,\n    set_audio_playing_status,\n    set_audio_player_instance,\n    //settings\n    settingFontSize: setting_font_size,\n    settingTheme: setting_theme,\n    settingThemePageBackgroundColor: setting_theme_page_background_color,\n    settingThemePageFontColor: setting_theme_page_font_color,\n    settingThemeHeaderBackgroundColor: setting_theme_header_background_color,\n    settingThemeTabBackgroundColor: setting_theme_tab_background_color,\n    set_font_size,\n    set_theme,\n    set_theme_page_background_color,\n    set_theme_page_font_color,\n    set_theme_header_background_color,\n    set_theme_tab_background_color\n  };\n  return (\n    <AppContext.Provider value={appState}>\n      <NavigationContainer ref={navigationRef}>\n        <StackNavigator />\n      </NavigationContainer>\n    </AppContext.Provider>\n  );\n}\n\nconst StackNavigator = () => {\n  const appStateContext = useContext(AppContext);\n\n  const SetSlider = (fontSize) => {    \n    if (!fontSize) { \n        fontSize = constants.settings.fontSize; \n    } else {\n        if (fontSize.toString() === appStateContext.settingFontSize.toString()) return; \n    }    \n    fontSize = Number(fontSize);\n    appStateContext.set_font_size(fontSize)\n  }\n  const SetTheme = (themeIndex) => {     \n      if (!themeIndex) {            \n          themeIndex = constants.settings.themeIndex; \n      } else {\n          if (themeIndex.toString() === appStateContext.settingTheme.toString()) return; \n      }\n      themeIndex = Number(themeIndex);\n      UpdateTheme(themeIndex);\n  }\n  const UpdateTheme = index => {\n    var themeIndex = 0;\n    var pageBg = styles.pageBodyLight, pageFont = styles.pageFontLight, headerBg = styles.headerBgLight, tabBg = styles.tabBgLight;\n    if (index) {\n        switch (index) {\n            case 1:\n                themeIndex = index;\n                pageBg = styles.pageBodyDark;\n                pageFont = styles.pageFontDark;\n                headerBg = styles.headerBgDark;\n                tabBg = styles.tabBgDark;\n                break;\n            case 2:\n                themeIndex = index;\n                pageBg = styles.pageBodyBook;\n                pageFont = styles.pageFontBook;\n                headerBg = styles.headerBgBook;\n                tabBg = styles.tabBgBook;\n                break;\n        }\n    }\n    \n    appStateContext.set_theme(themeIndex);\n    appStateContext.set_theme_page_background_color(pageBg);\n    appStateContext.set_theme_page_font_color(pageFont);\n    appStateContext.set_theme_header_background_color(headerBg);\n    appStateContext.set_theme_tab_background_color(tabBg);\n}\n\n  Load(constants.settings.fontSizeName)\n        .then(result => SetSlider(result))\n        .catch(error => {   \n            console.log(\"error caught font size\");         \n            SetSlider(constants.settings.fontSize); \n        })\n\n  Load(constants.settings.themeIndexName)\n      .then(result => SetTheme(result))\n      .catch(error => {            \n          console.log(\"error caught theme\");       \n          SetTheme(constants.settings.themeIndex);\n      });\n\n  return (\n    <Stack.Navigator\n      initialRouteName=\"Page\"\n      screenOptions={{\n        headerStyle: appStateContext.settingThemeHeaderBackgroundColor,\n        headerTintColor: \"#ffffff\",\n        headerTitleStyle: {\n          fontWeight: \"bold\",\n        },\n        cardStyle: appStateContext.settingThemePageBackgroundColor,\n      }}\n    >\n      <Stack.Screen name=\"Page\">\n        {(props) => <PageScreen {...props} />}\n      </Stack.Screen>\n      <Stack.Screen name=\"Error\" component={ErrorScreen} />\n      <Stack.Screen name=\"Settings\" component={SettingScreen} />\n    </Stack.Navigator>\n  );\n}\nexport default App;\n"]},"metadata":{},"sourceType":"module"}