{"ast":null,"code":"'use strict';\n\nvar ReactNative = require(\"react-native-web/dist/index\");\n\nvar RNSound = ReactNative.NativeModules.RNSound;\nvar IsAndroid = RNSound.IsAndroid;\nvar IsWindows = RNSound.IsWindows;\n\nvar resolveAssetSource = require(\"react-native/Libraries/Image/resolveAssetSource\");\n\nvar eventEmitter = new ReactNative.NativeEventEmitter(RNSound);\nvar nextKey = 0;\n\nfunction isRelativePath(path) {\n  return !/^(\\/|http(s?)|asset)/.test(path);\n}\n\nfunction Sound(filename, basePath, onError, options) {\n  var _this2 = this;\n\n  var asset = resolveAssetSource(filename);\n\n  if (asset) {\n    this._filename = asset.uri;\n    onError = basePath;\n  } else {\n    this._filename = basePath ? basePath + '/' + filename : filename;\n\n    if (IsAndroid && !basePath && isRelativePath(filename)) {\n      this._filename = filename.toLowerCase().replace(/\\.[^.]+$/, '');\n    }\n  }\n\n  this.registerOnPlay = function () {\n    var _this = this;\n\n    if (this.onPlaySubscription != null) {\n      console.warn('On Play change event listener is already registered');\n      return;\n    }\n\n    if (!IsWindows) {\n      this.onPlaySubscription = eventEmitter.addListener('onPlayChange', function (param) {\n        var isPlaying = param.isPlaying,\n            playerKey = param.playerKey;\n\n        if (playerKey === _this._key) {\n          if (isPlaying) {\n            _this._playing = true;\n          } else {\n            _this._playing = false;\n          }\n        }\n      });\n    }\n  };\n\n  this._loaded = false;\n  this._key = nextKey++;\n  this._playing = false;\n  this._duration = -1;\n  this._numberOfChannels = -1;\n  this._volume = 1;\n  this._pan = 0;\n  this._numberOfLoops = 0;\n  this._speed = 1;\n  RNSound.prepare(this._filename, this._key, options || {}, function (error, props) {\n    if (props) {\n      if (typeof props.duration === 'number') {\n        _this2._duration = props.duration;\n      }\n\n      if (typeof props.numberOfChannels === 'number') {\n        _this2._numberOfChannels = props.numberOfChannels;\n      }\n    }\n\n    if (error === null) {\n      _this2._loaded = true;\n\n      _this2.registerOnPlay();\n    }\n\n    onError && onError(error, props);\n  });\n}\n\nSound.prototype.isLoaded = function () {\n  return this._loaded;\n};\n\nSound.prototype.play = function (onEnd) {\n  if (this._loaded) {\n    RNSound.play(this._key, function (successfully) {\n      return onEnd && onEnd(successfully);\n    });\n  } else {\n    onEnd && onEnd(false);\n  }\n\n  return this;\n};\n\nSound.prototype.pause = function (callback) {\n  var _this3 = this;\n\n  if (this._loaded) {\n    RNSound.pause(this._key, function () {\n      _this3._playing = false;\n      callback && callback();\n    });\n  }\n\n  return this;\n};\n\nSound.prototype.stop = function (callback) {\n  var _this4 = this;\n\n  if (this._loaded) {\n    RNSound.stop(this._key, function () {\n      _this4._playing = false;\n      callback && callback();\n    });\n  }\n\n  return this;\n};\n\nSound.prototype.reset = function () {\n  if (this._loaded && IsAndroid) {\n    RNSound.reset(this._key);\n    this._playing = false;\n  }\n\n  return this;\n};\n\nSound.prototype.release = function () {\n  if (this._loaded) {\n    RNSound.release(this._key);\n    this._loaded = false;\n\n    if (!IsWindows) {\n      if (this.onPlaySubscription != null) {\n        this.onPlaySubscription.remove();\n        this.onPlaySubscription = null;\n      }\n    }\n  }\n\n  return this;\n};\n\nSound.prototype.getDuration = function () {\n  return this._duration;\n};\n\nSound.prototype.getNumberOfChannels = function () {\n  return this._numberOfChannels;\n};\n\nSound.prototype.getVolume = function () {\n  return this._volume;\n};\n\nSound.prototype.setVolume = function (value) {\n  this._volume = value;\n\n  if (this._loaded) {\n    if (IsAndroid || IsWindows) {\n      RNSound.setVolume(this._key, value, value);\n    } else {\n      RNSound.setVolume(this._key, value);\n    }\n  }\n\n  return this;\n};\n\nSound.prototype.getSystemVolume = function (callback) {\n  if (!IsWindows) {\n    RNSound.getSystemVolume(callback);\n  }\n\n  return this;\n};\n\nSound.prototype.setSystemVolume = function (value) {\n  if (IsAndroid) {\n    RNSound.setSystemVolume(value);\n  }\n\n  return this;\n};\n\nSound.prototype.getPan = function () {\n  return this._pan;\n};\n\nSound.prototype.setPan = function (value) {\n  if (this._loaded) {\n    RNSound.setPan(this._key, this._pan = value);\n  }\n\n  return this;\n};\n\nSound.prototype.getNumberOfLoops = function () {\n  return this._numberOfLoops;\n};\n\nSound.prototype.setNumberOfLoops = function (value) {\n  this._numberOfLoops = value;\n\n  if (this._loaded) {\n    if (IsAndroid || IsWindows) {\n      RNSound.setLooping(this._key, !!value);\n    } else {\n      RNSound.setNumberOfLoops(this._key, value);\n    }\n  }\n\n  return this;\n};\n\nSound.prototype.setSpeed = function (value) {\n  this._speed = value;\n\n  if (this._loaded) {\n    if (!IsWindows) {\n      RNSound.setSpeed(this._key, value);\n    }\n  }\n\n  return this;\n};\n\nSound.prototype.getCurrentTime = function (callback) {\n  if (this._loaded) {\n    RNSound.getCurrentTime(this._key, callback);\n  }\n};\n\nSound.prototype.setCurrentTime = function (value) {\n  if (this._loaded) {\n    RNSound.setCurrentTime(this._key, value);\n  }\n\n  return this;\n};\n\nSound.prototype.setSpeakerphoneOn = function (value) {\n  if (IsAndroid) {\n    RNSound.setSpeakerphoneOn(this._key, value);\n  }\n};\n\nSound.prototype.setCategory = function (value) {\n  Sound.setCategory(value, false);\n};\n\nSound.prototype.isPlaying = function () {\n  return this._playing;\n};\n\nSound.enable = function (enabled) {\n  RNSound.enable(enabled);\n};\n\nSound.enableInSilenceMode = function (enabled) {\n  if (!IsAndroid && !IsWindows) {\n    RNSound.enableInSilenceMode(enabled);\n  }\n};\n\nSound.setActive = function (value) {\n  if (!IsAndroid && !IsWindows) {\n    RNSound.setActive(value);\n  }\n};\n\nSound.setCategory = function (value) {\n  var mixWithOthers = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  if (!IsWindows) {\n    RNSound.setCategory(value, mixWithOthers);\n  }\n};\n\nSound.setMode = function (value) {\n  if (!IsAndroid && !IsWindows) {\n    RNSound.setMode(value);\n  }\n};\n\nSound.setSpeakerPhone = function (value) {\n  if (!IsAndroid && !IsWindows) {\n    RNSound.setSpeakerPhone(value);\n  }\n};\n\nSound.MAIN_BUNDLE = RNSound.MainBundlePath;\nSound.DOCUMENT = RNSound.NSDocumentDirectory;\nSound.LIBRARY = RNSound.NSLibraryDirectory;\nSound.CACHES = RNSound.NSCachesDirectory;\nmodule.exports = Sound;","map":{"version":3,"sources":["C:/sites/fo_expo/fo/node_modules/react-native-sound/sound.js"],"names":["RNSound","ReactNative","NativeModules","IsAndroid","IsWindows","resolveAssetSource","require","eventEmitter","NativeEventEmitter","nextKey","isRelativePath","path","test","Sound","filename","basePath","onError","options","asset","_filename","uri","toLowerCase","replace","registerOnPlay","onPlaySubscription","console","warn","addListener","param","isPlaying","playerKey","_key","_playing","_loaded","_duration","_numberOfChannels","_volume","_pan","_numberOfLoops","_speed","prepare","error","props","duration","numberOfChannels","prototype","isLoaded","play","onEnd","successfully","pause","callback","stop","reset","release","remove","getDuration","getNumberOfChannels","getVolume","setVolume","value","getSystemVolume","setSystemVolume","getPan","setPan","getNumberOfLoops","setNumberOfLoops","setLooping","setSpeed","getCurrentTime","setCurrentTime","setSpeakerphoneOn","setCategory","enable","enabled","enableInSilenceMode","setActive","mixWithOthers","setMode","setSpeakerPhone","MAIN_BUNDLE","MainBundlePath","DOCUMENT","NSDocumentDirectory","LIBRARY","NSLibraryDirectory","CACHES","NSCachesDirectory","module","exports"],"mappings":"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","sourcesContent":["'use strict';\n\nvar ReactNative = require('react-native');\nvar RNSound = ReactNative.NativeModules.RNSound;\nvar IsAndroid = RNSound.IsAndroid;\nvar IsWindows = RNSound.IsWindows;\nvar resolveAssetSource = require(\"react-native/Libraries/Image/resolveAssetSource\");\nvar eventEmitter = new ReactNative.NativeEventEmitter(RNSound);\n\nvar nextKey = 0;\n\nfunction isRelativePath(path) {\n  return !/^(\\/|http(s?)|asset)/.test(path);\n}\n\nfunction Sound(filename, basePath, onError, options) {\n  var asset = resolveAssetSource(filename);\n  if (asset) {\n    this._filename = asset.uri;\n    onError = basePath;\n  } else {\n    this._filename = basePath ? basePath + '/' + filename : filename;\n\n    if (IsAndroid && !basePath && isRelativePath(filename)) {\n      this._filename = filename.toLowerCase().replace(/\\.[^.]+$/, '');\n    }\n  }\n\n  this.registerOnPlay = function() {\n    if (this.onPlaySubscription != null) {\n      console.warn('On Play change event listener is already registered');\n      return;\n    }\n\n    if (!IsWindows) {\n      this.onPlaySubscription = eventEmitter.addListener(\n        'onPlayChange',\n        (param) => {\n          const { isPlaying, playerKey } = param;\n          if (playerKey === this._key) {\n            if (isPlaying) {\n              this._playing = true;\n            }\n            else {\n              this._playing = false;\n            }\n          }\n        },\n      );\n    }\n  }\n\n  this._loaded = false;\n  this._key = nextKey++;\n  this._playing = false;\n  this._duration = -1;\n  this._numberOfChannels = -1;\n  this._volume = 1;\n  this._pan = 0;\n  this._numberOfLoops = 0;\n  this._speed = 1;\n  RNSound.prepare(this._filename, this._key, options || {}, (error, props) => {\n    if (props) {\n      if (typeof props.duration === 'number') {\n        this._duration = props.duration;\n      }\n      if (typeof props.numberOfChannels === 'number') {\n        this._numberOfChannels = props.numberOfChannels;\n      }\n    }\n    if (error === null) {\n      this._loaded = true;\n      this.registerOnPlay();\n    }\n    onError && onError(error, props);\n  });\n}\n\nSound.prototype.isLoaded = function() {\n  return this._loaded;\n};\n\nSound.prototype.play = function(onEnd) {\n  if (this._loaded) {\n    RNSound.play(this._key, (successfully) => onEnd && onEnd(successfully));\n  } else {\n    onEnd && onEnd(false);\n  }\n  return this;\n};\n\nSound.prototype.pause = function(callback) {\n  if (this._loaded) {\n    RNSound.pause(this._key, () => {\n      this._playing = false;\n      callback && callback();\n    });\n  }\n  return this;\n};\n\nSound.prototype.stop = function(callback) {\n  if (this._loaded) {\n    RNSound.stop(this._key, () => {\n      this._playing = false;\n      callback && callback();\n    });\n  }\n  return this;\n};\n\nSound.prototype.reset = function() {\n  if (this._loaded && IsAndroid) {\n    RNSound.reset(this._key);\n    this._playing = false;\n  }\n  return this;\n};\n\nSound.prototype.release = function() {\n  if (this._loaded) {\n    RNSound.release(this._key);\n    this._loaded = false;\n    if (!IsWindows) {\n      if (this.onPlaySubscription != null) {\n        this.onPlaySubscription.remove();\n        this.onPlaySubscription = null;\n      }\n    }\n  }\n  return this;\n};\n\nSound.prototype.getDuration = function() {\n  return this._duration;\n};\n\nSound.prototype.getNumberOfChannels = function() {\n  return this._numberOfChannels;\n};\n\nSound.prototype.getVolume = function() {\n  return this._volume;\n};\n\nSound.prototype.setVolume = function(value) {\n  this._volume = value;\n  if (this._loaded) {\n    if (IsAndroid || IsWindows) {\n      RNSound.setVolume(this._key, value, value);\n    } else {\n      RNSound.setVolume(this._key, value);\n    }\n  }\n  return this;\n};\n\nSound.prototype.getSystemVolume = function(callback) {\n  if(!IsWindows) {\n    RNSound.getSystemVolume(callback);\n  }\n  return this;\n};\n\nSound.prototype.setSystemVolume = function(value) {\n  if (IsAndroid) {\n    RNSound.setSystemVolume(value);\n  }\n  return this;\n};\n\nSound.prototype.getPan = function() {\n  return this._pan;\n};\n\nSound.prototype.setPan = function(value) {\n  if (this._loaded) {\n    RNSound.setPan(this._key, this._pan = value);\n  }\n  return this;\n};\n\nSound.prototype.getNumberOfLoops = function() {\n  return this._numberOfLoops;\n};\n\nSound.prototype.setNumberOfLoops = function(value) {\n  this._numberOfLoops = value;\n  if (this._loaded) {\n    if (IsAndroid || IsWindows) {\n      RNSound.setLooping(this._key, !!value);\n    } else {\n      RNSound.setNumberOfLoops(this._key, value);\n    }\n  }\n  return this;\n};\n\nSound.prototype.setSpeed = function(value) {\n  this._speed = value;\n  if (this._loaded) {\n    if (!IsWindows) {\n      RNSound.setSpeed(this._key, value);\n    }\n  }\n  return this;\n};\n\nSound.prototype.getCurrentTime = function(callback) {\n  if (this._loaded) {\n    RNSound.getCurrentTime(this._key, callback);\n  }\n};\n\nSound.prototype.setCurrentTime = function(value) {\n  if (this._loaded) {\n    RNSound.setCurrentTime(this._key, value);\n  }\n  return this;\n};\n\n// android only\nSound.prototype.setSpeakerphoneOn = function(value) {\n  if (IsAndroid) {\n    RNSound.setSpeakerphoneOn(this._key, value);\n  }\n};\n\n// ios only\n\n// This is deprecated.  Call the static one instead.\n\nSound.prototype.setCategory = function(value) {\n  Sound.setCategory(value, false);\n}\n\nSound.prototype.isPlaying = function() {\n  return this._playing;\n}\n\nSound.enable = function(enabled) {\n  RNSound.enable(enabled);\n};\n\nSound.enableInSilenceMode = function(enabled) {\n  if (!IsAndroid && !IsWindows) {\n    RNSound.enableInSilenceMode(enabled);\n  }\n};\n\nSound.setActive = function(value) {\n  if (!IsAndroid && !IsWindows) {\n    RNSound.setActive(value);\n  }\n};\n\nSound.setCategory = function(value, mixWithOthers = false) {\n  if (!IsWindows) {\n    RNSound.setCategory(value, mixWithOthers);\n  }\n};\n\nSound.setMode = function(value) {\n  if (!IsAndroid && !IsWindows) {\n    RNSound.setMode(value);\n  }\n};\n\nSound.setSpeakerPhone = function(value) {\n  if (!IsAndroid && !IsWindows) {\n    RNSound.setSpeakerPhone(value)\n  }\n}\n\nSound.MAIN_BUNDLE = RNSound.MainBundlePath;\nSound.DOCUMENT = RNSound.NSDocumentDirectory;\nSound.LIBRARY = RNSound.NSLibraryDirectory;\nSound.CACHES = RNSound.NSCachesDirectory;\n\nmodule.exports = Sound;\n"]},"metadata":{},"sourceType":"script"}