{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar PropTypes = require(\"prop-types\");\n\nvar React = require(\"react\");\n\nvar react_native_1 = require(\"react-native-web/dist/index\");\n\nvar PopoverController = function (_super) {\n  __extends(PopoverController, _super);\n\n  function PopoverController() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      showPopover: false,\n      popoverAnchor: {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0\n      }\n    };\n\n    _this.onOrientationChange = function () {\n      if (_this.state.showPopover) {\n        requestAnimationFrame(_this.openPopover);\n      }\n    };\n\n    _this.touchable = null;\n\n    _this.setTouchableRef = function (ref) {\n      _this.touchable = ref;\n    };\n\n    _this.openPopover = function () {\n      var handle = react_native_1.findNodeHandle(_this.touchable);\n\n      if (handle) {\n        react_native_1.NativeModules.UIManager.measure(handle, _this.onTouchableMeasured);\n      }\n    };\n\n    _this.onTouchableMeasured = function (x0, y0, width, height, x, y) {\n      _this.setState({\n        showPopover: true,\n        popoverAnchor: {\n          x: x,\n          y: y,\n          width: width,\n          height: height\n        }\n      });\n    };\n\n    _this.closePopover = function () {\n      return _this.setState({\n        showPopover: false\n      });\n    };\n\n    return _this;\n  }\n\n  PopoverController.prototype.componentDidMount = function () {\n    react_native_1.Dimensions.addEventListener('change', this.onOrientationChange);\n  };\n\n  PopoverController.prototype.componentWillUnmount = function () {\n    react_native_1.Dimensions.removeEventListener('change', this.onOrientationChange);\n  };\n\n  PopoverController.prototype.render = function () {\n    return this.props.children({\n      openPopover: this.openPopover,\n      closePopover: this.closePopover,\n      setPopoverAnchor: this.setTouchableRef,\n      popoverVisible: this.state.showPopover,\n      popoverAnchorRect: this.state.popoverAnchor\n    });\n  };\n\n  PopoverController.propTypes = {\n    children: PropTypes.func.isRequired\n  };\n  return PopoverController;\n}(React.PureComponent);\n\nexports.PopoverController = PopoverController;","map":{"version":3,"sources":["../src/PopoverController.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAA,SAAA,GAAA,OAAA,CAAA,YAAA,CAAA;;AACA,IAAA,KAAA,GAAA,OAAA,CAAA,OAAA,CAAA;;;;AAqBA,IAAA,iBAAA,GAAA,UAAA,MAAA,EAAA;AAAuC,EAAA,SAAA,CAAA,iBAAA,EAAA,MAAA,CAAA;;AAAvC,WAAA,iBAAA,GAAA;AAAA,QAAA,KAAA,GAAA,MAAA,KAAA,IAAA,IAAA,MAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA,IAAA,IAAA;;AAKE,IAAA,KAAA,CAAA,KAAA,GAAe;AACb,MAAA,WAAW,EAAE,KADA;AAEb,MAAA,aAAa,EAAE;AAAE,QAAA,CAAC,EAAE,CAAL;AAAQ,QAAA,CAAC,EAAE,CAAX;AAAc,QAAA,KAAK,EAAE,CAArB;AAAwB,QAAA,MAAM,EAAE;AAAhC;AAFF,KAAf;;AAaQ,IAAA,KAAA,CAAA,mBAAA,GAAsB,YAAA;AAC5B,UAAI,KAAI,CAAC,KAAL,CAAW,WAAf,EAA4B;AAE1B,QAAA,qBAAqB,CAAC,KAAI,CAAC,WAAN,CAArB;AACD;AACF,KALO;;AAOA,IAAA,KAAA,CAAA,SAAA,GAAiB,IAAjB;;AAEA,IAAA,KAAA,CAAA,eAAA,GAAkB,UAAC,GAAD,EAAS;AACjC,MAAA,KAAI,CAAC,SAAL,GAAiB,GAAjB;AACD,KAFO;;AAIA,IAAA,KAAA,CAAA,WAAA,GAAc,YAAA;AACpB,UAAM,MAAM,GAAG,cAAA,CAAA,cAAA,CAAe,KAAI,CAAC,SAApB,CAAf;;AACA,UAAI,MAAJ,EAAY;AACV,QAAA,cAAA,CAAA,aAAA,CAAc,SAAd,CAAwB,OAAxB,CAAgC,MAAhC,EAAwC,KAAI,CAAC,mBAA7C;AACD;AACF,KALO;;AAOA,IAAA,KAAA,CAAA,mBAAA,GAAgD,UAAC,EAAD,EAAK,EAAL,EAAS,KAAT,EAAgB,MAAhB,EAAwB,CAAxB,EAA2B,CAA3B,EAA4B;AAClF,MAAA,KAAI,CAAC,QAAL,CAAc;AACV,QAAA,WAAW,EAAE,IADH;AAEV,QAAA,aAAa,EAAE;AAAE,UAAA,CAAC,EAAA,CAAH;AAAK,UAAA,CAAC,EAAA,CAAN;AAAQ,UAAA,KAAK,EAAA,KAAb;AAAe,UAAA,MAAM,EAAA;AAArB;AAFL,OAAd;AAID,KALO;;AAOA,IAAA,KAAA,CAAA,YAAA,GAAe,YAAA;AAAM,aAAA,KAAI,CAAC,QAAL,CAAc;AAAE,QAAA,WAAW,EAA3B;AAAc,OAAd,CAAA;AAAqC,KAA1D;;;AAWT;;AA9CC,EAAA,iBAAA,CAAA,SAAA,CAAA,iBAAA,GAAA,YAAA;AACE,IAAA,cAAA,CAAA,UAAA,CAAW,gBAAX,CAA4B,QAA5B,EAAsC,KAAK,mBAA3C;AACD,GAFD;;AAIA,EAAA,iBAAA,CAAA,SAAA,CAAA,oBAAA,GAAA,YAAA;AACE,IAAA,cAAA,CAAA,UAAA,CAAW,mBAAX,CAA+B,QAA/B,EAAyC,KAAK,mBAA9C;AACD,GAFD;;AAiCA,EAAA,iBAAA,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;AACE,WAAO,KAAK,KAAL,CAAW,QAAX,CAAoB;AACzB,MAAA,WAAW,EAAE,KAAK,WADO;AAEzB,MAAA,YAAY,EAAE,KAAK,YAFM;AAGzB,MAAA,gBAAgB,EAAE,KAAK,eAHE;AAIzB,MAAA,cAAc,EAAE,KAAK,KAAL,CAAW,WAJF;AAKzB,MAAA,iBAAiB,EAAE,KAAK,KAAL,CAAW;AALL,KAApB,CAAP;AAOD,GARD;;AA9CO,EAAA,iBAAA,CAAA,SAAA,GAAY;AACjB,IAAA,QAAQ,EAAE,SAAS,CAAC,IAAV,CAAe;AADR,GAAZ;AAuDT,SAAA,iBAAA;AAAC,CAxDD,CAAuC,KAAK,CAAC,aAA7C,CAAA;;AAAa,OAAA,CAAA,iBAAA,GAAA,iBAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar PropTypes = require(\"prop-types\");\nvar React = require(\"react\");\nvar react_native_1 = require(\"react-native\");\nvar PopoverController = (function (_super) {\n    __extends(PopoverController, _super);\n    function PopoverController() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = {\n            showPopover: false,\n            popoverAnchor: { x: 0, y: 0, width: 0, height: 0 },\n        };\n        _this.onOrientationChange = function () {\n            if (_this.state.showPopover) {\n                requestAnimationFrame(_this.openPopover);\n            }\n        };\n        _this.touchable = null;\n        _this.setTouchableRef = function (ref) {\n            _this.touchable = ref;\n        };\n        _this.openPopover = function () {\n            var handle = react_native_1.findNodeHandle(_this.touchable);\n            if (handle) {\n                react_native_1.NativeModules.UIManager.measure(handle, _this.onTouchableMeasured);\n            }\n        };\n        _this.onTouchableMeasured = function (x0, y0, width, height, x, y) {\n            _this.setState({\n                showPopover: true,\n                popoverAnchor: { x: x, y: y, width: width, height: height },\n            });\n        };\n        _this.closePopover = function () { return _this.setState({ showPopover: false }); };\n        return _this;\n    }\n    PopoverController.prototype.componentDidMount = function () {\n        react_native_1.Dimensions.addEventListener('change', this.onOrientationChange);\n    };\n    PopoverController.prototype.componentWillUnmount = function () {\n        react_native_1.Dimensions.removeEventListener('change', this.onOrientationChange);\n    };\n    PopoverController.prototype.render = function () {\n        return this.props.children({\n            openPopover: this.openPopover,\n            closePopover: this.closePopover,\n            setPopoverAnchor: this.setTouchableRef,\n            popoverVisible: this.state.showPopover,\n            popoverAnchorRect: this.state.popoverAnchor,\n        });\n    };\n    PopoverController.propTypes = {\n        children: PropTypes.func.isRequired,\n    };\n    return PopoverController;\n}(React.PureComponent));\nexports.PopoverController = PopoverController;\n//# sourceMappingURL=PopoverController.js.map"]},"metadata":{},"sourceType":"script"}